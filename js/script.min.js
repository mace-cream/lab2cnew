(function($){"use strict";$(window).on("load",function(){$('#preloader').fadeOut('slow',function(){$(this).remove();});});$('.play-icon i').click(function(){var video='<iframe allowfullscreen src="'+$(this).attr('data-video')+'"></iframe>';$(this).replaceWith(video);});$('.filtr-control').on('click',function(){$('.filtr-control').removeClass("active");$(this).addClass("active");});$('.testimonial-slider').slick({slidesToShow:2,slidesToScroll:1,infinite:true,arrows:false,autoplay:true,autoplaySpeed:2000,responsive:[{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});$('.clients-logo-slider').slick({infinite:true,arrows:false,autoplay:true,autoplaySpeed:2000,slidesToShow:5,slidesToScroll:1,});$('.company-gallery').slick({infinite:true,arrows:false,autoplay:true,autoplaySpeed:2000,slidesToShow:5,slidesToScroll:1,});$('.counter').each(function(){var $this=$(this),countTo=$this.attr('data-count');$({countNum:$this.text()}).animate({countNum:countTo},{duration:1500,easing:'linear',step:function(){$this.text(Math.floor(this.countNum));},complete:function(){$this.text(this.countNum);}});});$('#contact-submit').click(function(e){e.preventDefault();var error=false;var name=$('#name').val();var email=$('#email').val();var subject=$('#subject').val();var message=$('#message').val();if(name.length==0){var error=true;$('#name').css("border-color","#D8000C");}else{$('#name').css("border-color","#666");}
if(email.length==0||email.indexOf('@')=='-1'){var error=true;$('#email').css("border-color","#D8000C");}else{$('#email').css("border-color","#666");}
if(subject.length==0){var error=true;$('#subject').css("border-color","#D8000C");}else{$('#subject').css("border-color","#666");}
if(message.length==0){var error=true;$('#message').css("border-color","#D8000C");}else{$('#message').css("border-color","#666");}
if(error==false){$('#contact-submit').attr({'disabled':'false','value':'Sending...'});$.post("sendmail.php",$("#contact-form").serialize(),function(result){if(result=='sent'){$('#cf-submit').remove();$('#mail-success').fadeIn(500);}else{$('#mail-fail').fadeIn(500);$('#contact-submit').removeAttr('disabled').attr('value','Send The Message');}});}});})(jQuery);window.marker=null;function initMap(longitude,latitude){createMap(longitude,latitude);setMapEvent();addMapControl();addMarker();}
function createMap(longitude,latitude){var map=new BMap.Map("map");var point=new BMap.Point(longitude,latitude);map.centerAndZoom(point,18);window.map=map;}
function setMapEvent(){map.enableScrollWheelZoom();map.enableKeyboard();}
function addMapControl(){var ctrl_nav=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});map.addControl(ctrl_nav);var ctrl_ove=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});map.addControl(ctrl_ove);var ctrl_sca=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});map.addControl(ctrl_sca);}
var markerArr=[{title:"4I&nbsp;Lab",content:"我的备注",point:"114.011513|22.601976",isOpen:0,icon:{w:21,h:21,l:0,t:0,x:6,lb:5}}];function addMarker(){for(var i=0;i<markerArr.length;i++){var json=markerArr[i];var p0=json.point.split("|")[0];var p1=json.point.split("|")[1];var point=new BMap.Point(p0,p1);var iconImg=createIcon(json.icon);var marker=new BMap.Marker(point,{icon:iconImg});var iw=createInfoWindow(i);var label=new BMap.Label(json.title,{"offset":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});marker.setLabel(label);map.addOverlay(marker);label.setStyle({borderColor:"#808080",color:"#333",cursor:"pointer"});(function(){var index=i;var _iw=createInfoWindow(i);var _marker=marker;_marker.addEventListener("click",function(){this.openInfoWindow(_iw);});_iw.addEventListener("open",function(){_marker.getLabel().hide();})
_iw.addEventListener("close",function(){_marker.getLabel().show();})
label.addEventListener("click",function(){_marker.openInfoWindow(_iw);})
if(!!json.isOpen){label.hide();_marker.openInfoWindow(_iw);}})()}}
function createInfoWindow(i){var json=markerArr[i];var iw=new BMap.InfoWindow("<b class='iw_poi_title' title='"+json.title+"'>"+json.title+"</b><div class='iw_poi_content'>"+json.content+"</div>");return iw;}
function createIcon(json){var icon=new BMap.Icon("http://api.map.baidu.com/lbsapi/createmap/images/icon.png",new BMap.Size(json.w,json.h),{imageOffset:new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})
return icon;}
function initialize(){if($('#map').length==0)
return;var latitude=$('#map').data('lat');var longitude=$('#map').data('long');initMap(longitude,latitude);}
initialize();